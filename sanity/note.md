sanity ialah cms untuk manajemen data store graphql built in react base. untuk menggunakan sanity kita perlu modul sanity-cli dan juga perlu membuat akun pada sanity.io. memulai projek dengan cms sanity cukup mudah cukup buat folder dan ketikan perintah sanity init lalu pilih projek, jika sudah pernah membuat projek dengan sanity maka daftar list projek tersebut juga akan ditampilkan. akan tetapi sebelum itu diperlukan login pada sanity.io, jika belum login sanity-cli otomatis akan mengarahkan kita untuk login. setelah memilih projek/membuat projek baru kita akan dipilihkan dengan dataset configuration, by default sanity akan menggunakan dataset bernama production. setelah selesai meng-init sanity projek maka akan ada beberapa file dan folder. layaknya seperti dbms sanity juga memiliki schema folder yang nantinya akan berisi document document data yang berupa file javascript.

untuk membuat schema kita perlu file yang berisikan export sebuah objek konfigurasi field field dataset pada sanity. dan file tersebut harus diimport kedalam file schema utama lalu digunakan kedalam array objek pada hook fungsi createSchema(). tiap-tiap file schema yang kita buat haruslah digabungkan kedalam array objek pada hook fungsi tersebut. file dokumen dataset schema merupakan objek yang memiliki beberapa properti berupa name, title, type, icon, fields, preview, dll. name adalah untuk menamakan dokumen yang kita buat bisa juga mengarah pada dokumen id. title untuk penamaan yang akan dioutput di sanity cms, type berupa dokumen, icon untuk icon pada cms, lalu fields berisi sebuah objek array yang isinya berupa objek untuk konfigurasi input data.

objek objek pada fields mempunyai properti berdasarkan seperti apa tipe inputan data tersebut, beberapa diantaranya ialah name, title, type, description, options, validation dll. name sama seperti name dokumen yang nantinya akan merefer pada tiap inputan fields tersebut, title juga untuk tampilan di cms browser, type adalah tipe data inputan fields yang bisa berupa string, text, number, boolean, array, image, slug dll. description ialah sebuah deskripsi tentang inputan tersebut yang nantinya akan ditampilkan dibawah title pada cms. options juga berupa objek untuk konfigurasi tambahan seperti pada type slug, properti options bisa berisi source yang merefer ke suatu name pada fields. untuk merefer pada objek tertentu di sanity biasa menggunakan name properti. options pada type boolean juga bisa diisi dengan layout yang merupakan pilihan antara checkbox ataupun switch. dengan options kita juga bisa membatasi maxLength pada inputan, hotspot pada type image dll, lalu ada validation berupa fungsi yang bisa membatasi minimal jumlah pada type number dengan min() dan validation memiliki parameter yang merupakan objek input tersebut.

setelah fields properti ada preview yang akan menjadi tampilan pada list dokumen yang kita buat. preview juga berupa objek konfigurasi yang berupa select untuk memilih input mana saja yang akan ditampilkan dan juga prepare yang merupakan fungsi untuk mengeksekusi apa yang telah diselect. pada prepare() parameternya ialah berupa result objek dari select yang nantinya akan di return kedalam objek yang mempunyai properti properti tertentu berupa title, subtitle, media, date, dll. kembali kepada object pada fields yang memiliki type array maka harus ada properti tambahan berupa of yang merupakan type objek dari array tersebut. isi dari array juga bisa berisi objek dari schema lainnya. yaitu dengan mengisi type pada array of dengan reference, dan type reference juga memiliki properti tambahan yaitu to yang nantinya akan diisi oleh nama schema documents.

untuk membuat preview berupa array sanity mempunyai cara khusus yaitu dengan select dan berisi nama objeknya diikuti dengan index dan namanya, ex toppings.0.name - toppings.9.name, lalu pada preview() diperlukan rest operator dalam parameternya untuk menangkap semua properti tersebut, maka kita bisa memanfaatkannya dengan memanipulasi array tersebut. ini adalah cara manual yang kita tidak tahu dengan pasti/konstan berapa banyak data array tersebut. untuk itu pada saat memanipulasi array tersebut perlu adanya penanganan/filtering apabila data undefined.

karena built in react semua tampilan di cms juga merupakan react component, dan kita bisa mengubah suatu tampilan input pada suatu objek didalam fields. yaitu dengan properti inputComponent yang berisi file react. file react tersebut juga memiliki props built in sanity yang merupakan objek fields default yang kita buat. jadi kita bisa tetap menampilkannya dengan destructuring props dan juga bisa memanipulasinya seperti layaknya react biasa. setelah membuat schema dataset jika kita ingin menggunakannya dengan graphql maka sanity harus mendeploy dengan perintah "sanity graphql deploy --production" agar dataset yang kita buat bisa digunakan.
